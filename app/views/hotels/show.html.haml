- @hotel_availability['hotels']['hotels'].each do |hotel|
  - hotel_content = @hotel_content['hotel']

  .hotel-show
    .row
      .col-sm-12
        %h1
          = hotel['name']
          %span.star-rating{ class: "star-" + hotel["categoryCode"] }
            &nbsp;
    .row
      .col-sm-12
        %p= "#{hotel['destinationName']}, #{hotel['zoneName']}"
    .row
      .col-sm-12
        %p= "#{hotel_content['address']['content']}, #{hotel['destinationName']}"

    .links
      .row
        .col-sm-12
          .btn-group.btn-group-justified
            %a.btn.btn-default{ href: "#hotel-images" } Photos
            %a.btn.btn-default{ href: "#hotel-about" } About
            %a.btn.btn-default{ href: "#hotel-rooms" } Rooms
            %a.btn.btn-default{ href: "#hotel-facilities" } Facilities

    #hotel-images.images
      .row
        .col-sm-12
          .owl-carousel
            - hotel_content['images'].each do |image|
              .item
                %img.image.owl-lazy{ data: { src: "http://photos.hotelbeds.com/giata/bigger/" + image['path'] } }

    #hotel-about.about
      .row
        .col-sm-12
          %h2.title
            = hotel['name']
      .row
        .col-sm-12
          %p
            = hotel_content['description']['content']

    #hotel-rooms.rooms
      .row
        .col-sm-12
          %h2.title
            Rooms
      - hotel['rooms'].each do |room|
        .room
          .row
            .col-sm-3
              .row
                .col-sm-12
                  .name
                    = room['name']
              .row
                .col-sm-12
                  .image-container
                    %img{ src: room_image(room['code'], hotel_content['images']) }
              - Rails.logger.info "Hotel Content: #{hotel_content.inspect}"
              - room_facilities = find_room_facilities(room['code'], hotel_content['rooms'])
              - if room_facilities
                .row
                  .col-sm-12
                    %ul.facilities
                      - room_facilities.each do |room_facility|
                        %li.facility
                          = room_facility['description']['content']
                          - if room_facility.has_key? 'indFee'
                            %span.fee
                              $
            .col-sm-9
              - room['rates'].each do |rate|
                - calculated_rates = calculate_gross_room_rate(rate)
                .rate
                  .row
                    .col-sm-4
                      .row
                        .col-sm-12
                          .board-name
                            = rate['boardName']
                      - if rate.has_key? 'offers'
                        - rate['offers'].each do |offer|
                          .row
                            .col-sm-12
                              .offer
                                = offer['name']
                                / = offer['amount']
                    .col-sm-4
                      - if calculated_rates['gross'] != calculated_rates['client_total']
                        .comparison
                          .original
                            = calculated_rates['gross'].currency.iso_code
                            = calculated_rates['gross'].format
                          .new
                            = calculated_rates['client_total'].currency.iso_code
                            = calculated_rates['client_total'].format
                    .col-sm-4
                      .price
                        = calculated_rates['client_total'].currency.iso_code
                        = calculated_rates['client_total'].format

                      - room_specifics = { hotel_code: @hotel_code, room_code: room["code"], board_code: rate["boardCode"] }
                      - new_reservation_link = new_reservation_path + "?" + room_specifics.to_query + "&" + request.query_parameters.to_query
                      %a.with-loader.btn.btn-warning.btn-mini.pull-right{ href: new_reservation_link }
                        Reservar

                  - if rate['rateClass'] == 'NRF'
                    .row
                      .col-sm-12
                        .cancellation
                          This rate is non-refundable

                  - else
                    - if rate.has_key? 'cancellationPolicies'
                      - rate['cancellationPolicies'].each do |cancellation_policy|
                        .row
                          .col-sm-12
                            .cancellation
                              Cancellation penalty fee will be of
                              = calculated_rates['client_total'].currency.iso_code
                              = "$#{cancellation_policy['amount']}"
                              after
                              = DateTime.iso8601(cancellation_policy['from']).strftime("%m/%d/%Y %T %Z")

    #hotel-facilities.facilities
      .row
        .col-sm-12
          %h2.title
            Facilities
      .row
        .col-sm-12
          .row
            - grouped_facilities = group_facilities hotel_content['facilities']
            - grouped_facilities.each do |grouped_facility|
              .col-sm-3
                %ul
                  - grouped_facility.each do |facility|
                    %li
                      = facility['description']['content']
                      - if facility.has_key? 'indFee'
                        %span.facility_fee
                          $
